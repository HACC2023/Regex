Question: Virtual Server: How to Re-register Your ITS-Hosted Red Hat Linux Virtual 7 Server with Satellite
Article Text: OVERVIEW UH Information Technology Services (ITS) will be replacing the Katello content management service with Red Hat Satellite. All ITS-hosted Red Hat Enterprise Linux (RHEL) 7 virtual servers using the Katello service are required to re-register with the new Red Hat Satellite service. PROCEDURE To re-register your RHEL 7 virtual server with Satellite, do the following as either user root or using the "sudo" command: Enter the following commands one at a time in the order shown (each command is a single line, even if it displays as wrapped text due to the right margin of this page). subscription-manager repos --list-enabled subscription-manager unregister subscription-manager clean yum -y remove katello-ca-consumer-kat02.pvt.hawaii.edu.noarch curl http://satellite.pvt.hawaii.edu/pub/katello-ca-consumer-latest.noarch.rpm -o /var/tmp/katello-ca-consumer-latest.noarch.rpm yum install /var/tmp/katello-ca-consumer-latest.noarch.rpm subscription-manager register --force --org='UH-ITS' --activationkey='ak-UH,ak-CS-RHEL7' /usr/sbin/subscription-manager repos --disable "*" /usr/sbin/subscription-manager repos --enable rhel-7-server-rpms --enable rhel-7-server-extras-rpms --enable rhel-7-server-optional-rpms --enable UH-ITS_EPEL_7Server_x86_64 --enable UH-ITS_DuoSecurity_Duo_Redhat_7Server_x86_64 --enable rhel-server-rhscl-7-rpms /usr/bin/yum clean all service rhsmcertd restart /bin/rm /var/tmp/katello-ca-consumer-latest.noarch.rpm Verify that "yum" sees all the new Satellite repositories you enabled in step 1 above by using the "yum repolist enabled" command. Example below shows repos highlighted that the server should have. yum repolist enabled Loaded plugins: enabled_repos_upload, langpacks, package_upload, product-id, search-disabled- : repos, subscription-manager repo id repo name status !UH-ITS_DuoSecurity_Duo_Redhat_7Server_x86_64 Duo Redhat 7Server x86_64 22 !UH-ITS_EPEL_7Server_x86_64 7Server x86_64 13,745 azure-cli Azure CLI 122 duosecurity/7Server/x86_64 Duo Security Repository 22 hashicorp/7Server/x86_64 Hashicorp Stable - x86_64 934 influxdb/7Server/x86_64 InfluxDB Repository - RHEL 7Server 282 rhel-7-server-extras-rpms/x86_64 Red Hat Enterprise Linux 7 Server - Extras 1,444 rhel-7-server-optional-rpms/7Server/x86_64 Red Hat Enterprise Linux 7 Server - Option 23,643 rhel-7-server-rpms/7Server/x86_64 Red Hat Enterprise Linux 7 Server (RPMs) 33,401 rhel-server-rhscl-7-rpms/7Server/x86_64 Red Hat Software Collections RPMs for Red 14,337 repolist: 87,952 Uploading Enabled Repositories Report (Optional) Run the following commands to verify the subscription is current and registered. The output should look like this: subscription-manager status +-------------------------------------------+ System Status Details +-------------------------------------------+ Overall Status: Disabled Content Access Mode is set to Simple Content Access. This host has access to content, regardless of subscription status. System Purpose Status: Disabled Notify ITS Managed Services (e-mail itscs@hawaii.edu) when youâ€™re done re-registering your virtual server with Satellite, letting them know the hostname and IP of your virtual server.
