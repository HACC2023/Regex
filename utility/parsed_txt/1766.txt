Question: Departmental Website PHP Upgrade
Article Text: In our efforts to provide a better web hosting experience, we will be upgrading PHP from version 7.4 to PHP 8.0. This upgrade is tentatively scheduled for the morning of Monday, March 13, 2023. Previous Environment PHP 7.4.19 Current Environment PHP 8.0.13 This upgrade is a major-version PHP change and your website may cease to function or may not be fully functional if your site is not checked for compatibility with the new version of PHP. Setting up your computer to test the new PHP environment Notes for application developers about the PHP upgrade Other notes Setting up your computer to test the new PHP environment The first step is to point your computer's hosts file to the test webserver directly. This is accomplished differently depending on which Operating System you are using. Windows Setup Mac Setup Linux Setup Windows Setup Open your favorite text editor such as Notepad as an administrator (right-click, run as administrator). From your text editor, open up your computer's hosts file. You will find your hosts file here: %systemroot%\system32\drivers\etc\hosts (%systemroot% is usually c:\windows\ but may be somewhere else if your Windows was set up differently.) If your website is hosted on one of the domains shown below, add the line as shown. If not, please contact web-support-l@lists.hawaii.edu with your domain name and we will let you know what your line should be. 128.171.149.219 www.hawaii.edu 128.171.149.220 manoa.hawaii.edu 128.171.149.221 hawaii.hawaii.edu 128.171.149.222 maui.hawaii.edu 128.171.149.223 uhcc.hawaii.edu Save the file (for Notepad: from the menu, File -> Save or ctrl+s), and when you open your browser to your website, it will now point to the test webservers running in the enterprise Linux environment. You can test compatibility by going to your website, and doing what you regularly do on your website and seeing if any errors arise. If everything works fine, you're all set. After you complete testing, remember to remove the line from your hosts file that you added in step three to have your browsers point back to the production websites. Mac Setup Open your Terminal app. For most users, this is under Applications Folder -> Utilities Folder In Terminal, your first step is to open your hosts file with your console's text editor as Super User. This can be done by typing the following into the Terminal app: sudo nano /private/etc/hosts Next, you will need to update your hosts file by adding your website's domain to it. If your website is hosted on one of the domains shown below, add the line as shown. If not, please contact web-support-l@lists.hawaii.edu with your domain name and we will let you know what your line should be. 128.171.149.219 www.hawaii.edu 128.171.149.220 manoa.hawaii.edu 128.171.149.221 hawaii.hawaii.edu 128.171.149.222 maui.hawaii.edu 128.171.149.223 uhcc.hawaii.edu Add the appropriate line above to your hosts file then to save the file, Hit ctrl+x, type 'y', and press enter. After the file has been saved, the next time you open your browser and visit your website, it will now point to the test webservers running the newer version of PHP. You can test compatibility by going to your website, and doing what you regularly do on your website and seeing if any errors arise. If everything works fine, you're all set. After you complete testing, remember to remove the line from your hosts file that you added in Terminal to stop your browsers from pointing at the test webserver. Linux Setup Open up your favorite text editor with Super User (root) access. From your text editor, open up your computer's hosts file. You will typically find your hosts file here: /etc/hosts If your website is hosted on one of the domains shown below, add the line as shown. If not, please contact web-support-l@lists.hawaii.edu with your domain name and we will let you know what your line should be. 128.171.149.219 www.hawaii.edu 128.171.149.220 manoa.hawaii.edu 128.171.149.221 hawaii.hawaii.edu 128.171.149.222 maui.hawaii.edu 128.171.149.223 uhcc.hawaii.edu Save the file, and when you open your browser to your website, it will now point to the test webservers running in the enterprise Linux environment. You can test compatibility by going to your website, and doing what you regularly do on your website and seeing if any errors arise. If everything works fine, you're all set. After you complete testing, make sure you remember to remove the line from your hosts file and save to have your browsers point back to the production websites. Notes for application developers about the PHP upgrade Notable change(s): The ability to define case-insensitive constants has been removed. The third argument to define() may no longer be true. The ability to specify an autoloader using an __autoload() function has been removed. spl_autoload_register() should be used instead. create_function() has been removed. Anonymous functions may be used instead. each() has been removed. foreach or ArrayIterator should be used instead. The ability to unbind this from closures that were created from a method, using Closure::fromCallable() or ReflectionMethod::getClosure(), has been removed. The ability to unbind this from proper closures that contain uses of this has also been removed. The ability to use array_key_exists() with objects has been removed. isset() or property_exists() may be used instead. The @ operator will no longer silence fatal errors (E_ERROR, E_CORE_ERROR, E_COMPILE_ERROR, E_USER_ERROR, E_RECOVERABLE_ERROR, E_PARSE). #[ is no longer interpreted as the start of a comment, as this syntax is now used for attributes. Support for deprecated curly braces for offset access has been removed. EXIF: read_exif_data() has been removed; exif_read_data() should be used instead. GD: The deprecated function image2wbmp() has been removed. GD: The deprecated functions png2wbmp() and jpeg2wbmp() have been removed. GMP: gmp_random() has been removed. One of gmp_random_range() or gmp_random_bits() should be used instead. IMAP: The imap_header() function which is an alias of imap_headerinfo() has been removed. LDAP: The deprecated functions ldap_sort(), ldap_control_paged_result() and ldap_control_paged_result_response() have been removed. MBString: The ISO_8859-* character encoding aliases have been replaced by ISO8859-* aliases for better interoperability with the iconv extension. The mbregex ISO 8859 aliases with underscores (ISO_8859_* and ISO8859_*) have also been removed. OCI8: oci_internal_debug() and its alias ociinternaldebug() have been removed. SPL: SplFileObject::fgetss() has been removed. SPL: SplFixedArray is now an IteratorAggregate and not an Iterator. SplFixedArray::rewind(), SplFixedArray::current(), SplFixedArray::key(), SplFixedArray::next(), and SplFixedArray::valid() have been removed. In their place, SplFixedArray::getIterator() has been added. Any code which uses explicit iteration over SplFixedArray must now obtain an Iterator through SplFixedArray::getIterator(). This means that SplFixedArray is now safe to use in nested loops. assert() will no longer evaluate string arguments, instead they will be treated like any other argument. assert($a == $b) should be used instead of assert('$a == $b'). The assert.quiet_eval ini directive and the ASSERT_QUIET_EVAL constant have also been removed, as they would no longer have any effect. The string.strip_tags filter has been removed. The following functions have been removed: hebrevc() convert_cyr_string() money_format() ezmlm_hash() restore_include_path() get_magic_quotes_gpc() get_magic_quotes_runtime() fgetss() FILTER_SANITIZE_MAGIC_QUOTES has been removed. gzgetss() has been removed. For detailed information about the php upgrade, please check out this PHP migration guide, with particular focus on 'Backward Incompatible Changes' and 'Removed Extensions' : PHP 7.4 > PHP 8.0 Other notes If you are experiencing errors with your site, please email us at web-support-l@lists.hawaii.edu with the date and time of your error and a copy of the error messages you may have received. If you any comments, concerns, or questions, please email us at web-support-l@lists.hawaii.edu
