Question: Updating WordPress on Hosted Departmental Sites
Article Text: Setting Administration over SSL Before starting any updates, the first thing you should do is setup 'Administration Over SSL' for your wordpress site. This is because if updates are done using http, your authentication information could be transmitted unencrypted and potentially be stolen. To do this, add the following line to your wp-config.php above the line: /* That's all, stop editing! Happy blogging. */ define('FORCE_SSL_ADMIN', true); Note that your domain will need to be SSL enabled to use this setting so if you are using your own special subdomain (ex. program.campus.hawaii.edu, and https://program.campus.hawaii.edu does not work for you) you may need to buy a certificate for the domain you are using to securely update your site. Download SSH SFTP Updater Support Plugin To enable WordPress One-Click update for your site, you will first need to download the wordpress plugin SSH SFTP Updater Support. To get the plugin, click the download link at: https://wordpress.org/plugins/ssh-sftp-updater-support/ . After downloading, uncompress the .zip file you receive and place the folder named "ssh-sftp-updater-support" somewhere in your computer's work area, for example the desktop. Upload Plugin to Site Next, you need to upload this plugin to your site. Connect to webedit with your preferred sFTP client, you should have received your connection settings via email when your site was created. Go to your site's directory and upload the folder named "ssh-sftp-updater-support" from your work area to your site's wordpress plugin directory. To get to this directory, first go to your site's home directory, then look within your site's structure for a directory named /wp-content/plugins/. (ex. if your site is located at /1/mysite, the plugin directory would typically be located at /1/mysite/wp-content/plugins). Once there, upload the whole "ssh-sftp-updater-support" directory from your computer's work area to the "plugins" directory. Activate Plugin After uploading, log into your wordpress site and click on Menu Item at the left named "Plugins". Find the plugin named SSH SFTP Updater Support in the list and enable it by pressing the Activate link as shown below. Start Update After activation, go back to your Dashboard, and either click on the Menu Item "Updates", or click on the link labeled "Please update now" to go to WordPress Updates. After the page loads, click the button named "Update Now" as shown below to begin the update process. On the Update Screen, first make sure your "Connection Type" at the bottom is set to SSH2. (webedit does not support FTP or FTPS connections) After that is set, please use the following settings: Hostname: webedit.its.hawaii.edu FTP/SSH Username: <your UH Username> FTP/SSH Password: <your password> (note: your UH email password, not your WordPress password) The Private Key setting should be left blank. After this, press the "Proceed" button at the bottom of your screen. Update Plugins / Themes This will begin the update process. A screen will describe what's being updated on your site, and when that is completed it will bring you back to your WordPress Dashboard. Make sure after you update WordPress, you go back to WordPress Updates, (Updates in the Left Menu, or a circular arrow icon with a number at the top of your screen) and update your Plugins and Themes as well. To do this, check the checkmark next to the plugins/themes that needs updating, then press the Update Plugins/Update Theme button. The plugin/theme update process will be similar to the wordpress update process you've just gone through. Troubleshooting If the Auto-Update fails, and your site displays a message saying it is unavailable for scheduled maintenance, delete the .maintenance file from your site's home directory using your sFTP client and try again. Another common occurence in failed site updates is a configuration themes sometimes add to a site's wp-config.php file. The setting of FS_METHOD to 'direct' doesn't allow sites to update via sftp. To remedy this, comment out the line by adding two slashes '//' in front of the line, and start the update process again. After doing updates, remove the slashes as it may be needed by the theme to perform certain functions. Before: define ( FS_METHOD , 'direct' ); After: //define ( FS_METHOD , 'direct' ); Should you continue to have issues updating, please contact the web group at web-support-l@lists.hawaii.edu with information about what step in the process is failing along with any error messages that appeared during the update process. Taking screenshots of the errors you run into is usually very helpful for us to help diagnose your problem.
